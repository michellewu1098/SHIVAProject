///-----------------------------------------------------------------------------------------------
/// \file CommandManager.h
/// \brief Commands manager
/// \author Michelle Wu
/// \date May 18, 2017
/// \version 1.0
///-----------------------------------------------------------------------------------------------


#ifndef COMMANDMANAGER_H
#define COMMANDMANAGER_H

#include <stack>
#include "Command.h"
#include "Totem/TotemController.h"

namespace Totem
{
	class CommandManager
	{
	public:
		
		//----------------------------------------------------------------------------------
		/// \brief Initialise CommandManager
		//----------------------------------------------------------------------------------
		static CommandManager* Init();
		//----------------------------------------------------------------------------------
		/// \brief Get instance of CommandManager
		//----------------------------------------------------------------------------------
		static CommandManager* GetInstance() { return m_instance; }
		//----------------------------------------------------------------------------------
		/// \brief Uninitialise CommandManager
		//----------------------------------------------------------------------------------
		static void UnInit();
		//----------------------------------------------------------------------------------
		/// \brief Execute commands
		/// \param [in] _currenCmd Current command
		//----------------------------------------------------------------------------------
		void Execute( Command* _currentCmd );
		//----------------------------------------------------------------------------------
		/// \brief Undo commands
		//----------------------------------------------------------------------------------
		void Undo();
		//----------------------------------------------------------------------------------
		/// \brief Redo commands
		//----------------------------------------------------------------------------------
		void Redo();
		//----------------------------------------------------------------------------------
		/// \brief Clear CommandManager
		//----------------------------------------------------------------------------------
		void Clear();
		//----------------------------------------------------------------------------------

	private:

		//----------------------------------------------------------------------------------
		/// \brief Reference to CommandManager
		//----------------------------------------------------------------------------------
		static CommandManager *m_instance;
		//----------------------------------------------------------------------------------
		/// \brief Ctor
		//----------------------------------------------------------------------------------
		CommandManager();
		//----------------------------------------------------------------------------------
		/// \brief Dtor
		//----------------------------------------------------------------------------------
		~CommandManager();
		//----------------------------------------------------------------------------------
		/// \brief Undo commands stack
		//----------------------------------------------------------------------------------
		std::stack< Command* > m_undoStack;
		//----------------------------------------------------------------------------------
		/// \brief Redo commands stack
		//----------------------------------------------------------------------------------
		std::stack< Command* > m_redoStack;
		//----------------------------------------------------------------------------------
		/// \brief Current command
		//----------------------------------------------------------------------------------
		//Command* m_currentCmd;
		//----------------------------------------------------------------------------------
		/// \brief Handle to a totem controller
		//----------------------------------------------------------------------------------
		Totem::Controller* m_totemController;
		//----------------------------------------------------------------------------------
	};
}

#endif